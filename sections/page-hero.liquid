{%- if section.settings.adapt_height_first_image and section.settings.image != blank -%}
  {%- style -%}
    #Banner-{{ section.id }}::before, #Banner-{{ section.id }} .banner__media::before {
      padding-bottom: {{ 1 | divided_by: section.settings.image.aspect_ratio | times: 100 }}%;
      content: '';
      display: block;
    }
  {%- endstyle -%}
{%- endif -%}

{% assign slides = section.blocks | where: 'type', 'slide' %}
{% assign logos = section.blocks | where: 'type', 'logo' %}

<div class="SectionGrid color-{{ section.settings.color_scheme }}">
  <div class="SectionGrid-Full ofh">
    <div class="ndesktop w-100p">
      <div class="collection {% if section.settings.swipe_on_mobile == true %} page-width-desktop{% endif%}">
        <animated-slider class="slider-mobile-gutter">
          <ul class="grid slider slider--mobile slider--tablet slider--desktop grid--peek negative-margin negative-margin--small">
            {% for slide in slides %}
              <li class="grid__item slider__slide w-100p">
                {% liquid 
                  case slide.settings.color_scheme
                    when 'background-1'
                      assign tagBackground = settings.colors_text 
                      assign tagForeground = settings.colors_background_1
                    when 'background-2'
                      assign tagBackground = settings.colors_text 
                      assign tagForeground = settings.colors_background_2
                    when 'inverse'
                      assign tagBackground = settings.colors_background_1
                      assign tagForeground = settings.colors_text
                    when 'accent-1'
                      assign tagBackground = settings.colors_solid_button_labels
                      assign tagForeground = settings.colors_accent_1
                    when 'accent-2'
                      assign tagBackground = settings.colors_solid_button_labels
                      assign tagForeground = settings.colors_accent_2
                    else
                      assign tagBackground = settings.colors_text 
                      assign tagForeground = settings.colors_background_1
                  endcase
                %}
                <div class="ngrid onecol onerow">
                  {% if slide.settings.video != blank and slide.settings.video != "" %}
                    <video
                      muted
                      autoplay
                      loop
                      poster="{{ slide.settings.posterImage | img_url: '2000x' }}"
                      src="{{ slide.settings.video | escape }}"
                      class="w-100p cover lazy col-1 row-1"
                      height="700"
                    >
                      Sorry, your browser doesn't support embedded videos!
                    </video>
                  {% else %}
                    <img src="{{ slide.settings.imageMobile | img_url: '1200x' }}" alt="{{ slide.settings.image.alt | escape }}" class="w-100p cover col-1 row-1 op-ct" width="1000" height="700" loading="lazy">
                  {% endif %}
                  <div class="w-100p col-1 row-1 px-md-30px flex column jc-fe h-100p">
                    <h1 class="ta-c ta-md-l {% if slide.settings.uppercaseTitle %}uppercase {% endif %}my-0 py-0 lh-117 ls-m220" style="color: {{ tagBackground | escape }};">
                      {{ slide.settings.title | escape }}
                    </h1>
                    <p class="ff-body fs-3 lh-133 mt-3 mb-5 ta-c ta-md-l" style="color: {{ tagBackground | escape }};">
                      {{ slide.settings.text | escape }}
                    </p>
                    <div class="ta-c ta-md-l w-100p mt-4 mb-8">
                      {% if slide.settings.buttonDesign == "filled" %}
                        <a href="{{ slide.settings.url }}" class="py-3 px-8 mxh-60px inlblock ta-c ff-heading uppercase z-1000 nodec button" style="background-color: {{ tagBackground }}; color: {{ tagForeground }};">
                          {{ slide.settings.buttonText | escape }}
                        </a>
                    {% else %}
                      <a href="{{ slide.settings.url }}" class="py-3 px-8 mxh-60px inlblock ta-c ff-heading uppercase z-1000 nodec button" style="background-color: transparent; border-color: {{ tagBackground }}; border-width: 2px; border-style: solid; color: {{ tagBackground }};">
                        {{ slide.settings.buttonText | escape }}
                      </a>
                    {% endif %}
                  </div>
                </div>
                <div class="w-100p flex column jc-fe py-7" style="background-color: {{ tagForeground | escape }}; color: {{ tagBackground | escape }};">
                  <p class="w-100p ta-c uppercase mb-7">
                    {{ section.settings.introText | escape }}
                  </p>
                  <div class="flex row jc-spb ai-fs wrap h-20px ofh">
                    {% for logo in logos %}
                      {% if logo.settings.showMobile %}
                        <img src="{{ logo.settings.image | img_url: 'x50' }}" alt="{{ logo.settings.image.alt | escape }}" loading="lazy" width="100" height="20" class="h-20px w-auto mx-5 grow-0 shrink-0">
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>
          {%- if slides.size > 1 and section.settings.swipe_on_mobile -%}
            <div class="slider-buttons no-js-hidden w-100p flex row jc-spb ai-c">
              <button type="button" class="slider-button slider-button--prev hero-button" name="previous" aria-label="{{ 'accessibility.previous_slide' | t }}">{% render 'icon-caret' %}</button>
              <div class="slider-counter caption">
                <span class="slider-counter--current">1</span>
                <span aria-hidden="true"> / </span>
                <span class="visually-hidden">{{ 'accessibility.of' | t }}</span>
                <span class="slider-counter--total">{{ slides.size }}</span>
              </div>
              <button type="button" class="slider-button slider-button--next hero-button" name="next" aria-label="{{ 'accessibility.next_slide' | t }}">{% render 'icon-caret' %}</button>
            </div>
          {%- endif -%}
        </animated-slider>
      </div>
    </div>
    <div class="w-100p desktop">
      <div class="collection w-100p mb-m44px">
        <animated-slider class="slider-mobile-gutter">
          <ul class="grid slider slider--mobile slider--tablet slider--desktop grid--peek negative-margin negative-margin--small w-100p h-100p pb-0i">
            {% for slide in slides %}
              <li class="grid__item slider__slide w-100p pb-0i">
                {% liquid 
                  case slide.settings.color_scheme
                    when 'background-1'
                      assign tagBackground = settings.colors_text 
                      assign tagForeground = settings.colors_background_1
                    when 'background-2'
                      assign tagBackground = settings.colors_text 
                      assign tagForeground = settings.colors_background_2
                    when 'inverse'
                      assign tagBackground = settings.colors_background_1
                      assign tagForeground = settings.colors_text
                    when 'accent-1'
                      assign tagBackground = settings.colors_solid_button_labels
                      assign tagForeground = settings.colors_accent_1
                    when 'accent-2'
                      assign tagBackground = settings.colors_solid_button_labels
                      assign tagForeground = settings.colors_accent_2
                    else
                      assign tagBackground = settings.colors_text 
                      assign tagForeground = settings.colors_background_1
                  endcase
                %}
                <div class="SectionGrid onerow">
                  {% if slide.settings.video != blank and slide.settings.video != "" %}
                    <video
                      muted
                      autoplay
                      loop
                      src="{{ slide.settings.video | escape }}"
                      poster="{{ slide.settings.posterImage | img_url: '2000x' }}"
                      class="w-100p col-1-5 row-1 mxh-700px cover lazy"
                      height="700"
                    >
                      Sorry, your browser doesn't support embedded videos!
                    </video>
                  {% else %}
                    <img src="{{ slide.settings.imageDesktop | img_url: '2000x' }}" alt="{{ slide.settings.image.alt | escape }}" class="col-1-5 row-1 w-100p cover" width="1500" height="700" loading="lazy">
                  {% endif %}
                  <div class="col-2-4 row-1 grid twocol z-5">
                    <div class="col-1 flex column jc-c ai-fs mxh-700px ml-5">
                      <h1 class="mb-8 mt-0 z-5 ff-heading fs-62px fw-500 lh-60px ta-l{% if slide.settings.uppercaseTitle %} uppercase{% endif %}" style="max-width: 450px; color: {{ tagBackground | escape }};">
                        {% liquid 
                          assign titleSections = slide.settings.title | split: ' '
                          assign titlePartA = titleSections[0] | append: ' ' | append: titleSections[1]
                          assign titlePartB = titleSections[2] | append: ' ' | append: titleSections[3] | append: ' ' | append: titleSections[4]
                        %}
                        {{ titlePartA | escape }}<br>
                        {{ titlePartB | escape }}
                      </h1>
                      <p class="ff-body fs-4 lh-32px ls-p024 fw-300 z-5 mt-0 mb-8 ta-l" style="color: {{ tagBackground | escape }};">
                        {{ slide.settings.text | escape }}
                      </p>
                      <div class="ta-l w-100p mt-4 mb-5">
                        {% if slide.settings.buttonDesign == "filled" %}
                          <a href="{{ slide.settings.url }}" class="py-5 px-7 ta-c ff-heading uppercase fs-1 lh-100 fw-300 nodec button" style="background-color: {{ tagBackground }}; color: {{ tagForeground }};">
                            {{ slide.settings.buttonText | escape }}
                          </a>
                        {% else %}
                          <a href="{{ slide.settings.url }}" class="py-5 px-7 ta-c ff-heading uppercase fs-1 lh-100 fw-300 nodec button" style="background-color: transparent; border-color: {{ tagBackground }}; border-width: 2px; border-style: solid; color: {{ tagBackground }};">
                            {{ slide.settings.buttonText | escape }}
                          </a>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  {% if logos.size > 0 %}
                    <div class="col-2-4 row-1 uppercase pt-600px h-620px ofh flex row jc-spb ai-fs wrap w-100p">
                      <p class="uppercase mr-4" style="color: {{ tagBackground }};">{{ section.settings.introText | escape }}</p>
                      {% for logo in logos %}
                        {% if logo.settings.showDesktop %}
                          <img src="{{ logo.settings.image | img_url: 'x50' }}" alt="{{ logo.settings.image.alt | escape }}" width="100" height="20" class="h-20px w-auto mx-5 grow-0 shrink-0" loading="lazy">
                        {% endif %}
                      {% endfor %}
                    </div>
                  {% endif %}
                </div>
              </li>
            {% endfor %}
          </ul>
          {%- if slides.size > 1 and section.settings.swipe_on_mobile -%}
            <div class="slider-buttons no-js-hidden w-100p flex row jc-spb ai-c">
              <button type="button" class="slider-button slider-button--prev hero-button" name="previous" aria-label="{{ 'accessibility.previous_slide' | t }}">{% render 'icon-caret' %}</button>
              <div class="slider-counter caption">
                <span class="slider-counter--current">1</span>
                <span aria-hidden="true"> / </span>
                <span class="visually-hidden">{{ 'accessibility.of' | t }}</span>
                <span class="slider-counter--total">{{ slides.size }}</span>
              </div>
              <button type="button" class="slider-button slider-button--next hero-button" name="next" aria-label="{{ 'accessibility.next_slide' | t }}">{% render 'icon-caret' %}</button>
            </div>
          {%- endif -%}
        </animated-slider>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Pageheader",
  "tag": "section",
  "class": "spaced-section--full-width",
  "settings": [
    {
      "type": "text",
      "id": "introText",
      "default": "sleep.ink ist bekannt aus:",
      "label": "einleitender Text für Presselogos"
    },
    {
      "type": "checkbox",
      "id": "swipe_on_mobile",
      "default": true,
      "label": "auf Mobilgeräten swipen?"
    }
  ],
  "blocks": [
    {
      "name": "Slide",
      "type": "slide",
      "settings": [
        {
          "type": "select",
          "id": "color_scheme",
          "options": [
            {
              "value": "accent-1",
              "label": "t:sections.image-banner.settings.color_scheme.options__1.label"
            },
            {
              "value": "accent-2",
              "label": "t:sections.image-banner.settings.color_scheme.options__2.label"
            },
            {
              "value": "background-1",
              "label": "t:sections.image-banner.settings.color_scheme.options__3.label"
            },
            {
              "value": "background-2",
              "label": "t:sections.image-banner.settings.color_scheme.options__4.label"
            },
            {
              "value": "inverse",
              "label": "t:sections.image-banner.settings.color_scheme.options__5.label"
            }
          ],
          "default": "background-1",
          "label": "Farbschema"
        },
        {
          "type": "image_picker",
          "id": "imageDesktop",
          "label": "Hintergrundbild (Desktop)"
        },
        {
          "type": "image_picker",
          "id": "imageMobile",
          "label": "Hintergrundbild (Mobile/Tablet)"
        },
        {
          "type": "text",
          "id": "video",
          "label": "URL des Hintergrundvideos"
        },
        {
          "type": "image_picker",
          "id": "posterImage",
          "label": "Platzhalterbild während des Ladens des Videos"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Überschrift"
        },
        {
          "type": "checkbox",
          "id": "uppercaseTitle",
          "default": true,
          "label": "Überschrift in Großbuchstaben?"
        },
        {
          "type": "textarea",
          "id": "text",
          "default": "Mehr als 75.000 zufriedene Kunden.",
          "label": "Subline"
        },
        {
          "type": "url",
          "id": "url",
          "default": "/collections/all",
          "label": "URL hinter dem Button"
        },
        {
          "type": "select",
          "id": "buttonDesign",
          "default": "outlined",
          "label": "Layout des Buttons",
          "options": [
            {
              "value": "outlined",
              "label": "nur Kontur"
            },
            {
              "value": "filled",
              "label": "ausgefüllt"
            }
          ]
        },
        {
          "type": "text",
          "id": "buttonText",
          "default": "Jetzt einkaufen",
          "label": "Aufschrift des Buttons"
        }
      ]
    },
    {
      "name": "Presselogo",
      "type": "logo",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "checkbox",
          "id": "showDesktop",
          "label": "show on desktop",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "showMobile",
          "label": "show on mobile devices",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Page Hero",
      "settings": {
        "introText": "sleep.ink ist bekannt aus:"
      }
    }
  ]
}
{% endschema %}
